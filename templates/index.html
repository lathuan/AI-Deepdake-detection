<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cyber AI Deepfake Scanner</title>
<link rel="stylesheet" href="/static/style.css">
</head>
<body>
<nav class="navbar">
    <div class="nav-logo">CYBER AI DETECT</div>
</nav>

<main class="container">
    <h1>‚ö° AI Deepfake Scanner</h1>
    <p>Upload a video and detect if it is real or fake using next-gen AI technology.</p>

    <div class="upload-area">
        <input type="file" id="videoInput">
        <button id="detectBtn">üíª Scan Video</button>
    </div>

    <div id="result" class="result"></div>
</main>

<script>
document.getElementById('detectBtn').onclick = async () => {
    const fileInput = document.getElementById('videoInput')
    if (!fileInput.files.length) return alert("Ch·ªçn video ƒë√£ nh√©!")

    const formData = new FormData()
    formData.append('video', fileInput.files[0])

    const resultDiv = document.getElementById('result')
    resultDiv.innerHTML = `<div class="loader"></div><p>üîÑ Processing video...</p>`

    try {
        const res = await fetch('/upload', {method:'POST', body: formData})
        const data = await res.json()
        if(data.error){
            resultDiv.innerHTML = `<p class="error">‚ùå Error: ${data.error}</p>`
            return
        }

        let html = `<h2 class="prediction">${data.prediction}</h2>
                    <p>Confidence: ${(data.confidence*100).toFixed(2)}%</p>
                    <p>Faces detected: ${data.num_faces}</p>`

        if(data.faces_sample && data.faces_sample.length>0){
            html += '<h3>üë§ Sample faces:</h3>'
            data.faces_sample.forEach(face=>{
                html+=`<img src="data:image/jpeg;base64,${face}" class="face-sample">`
            })
        }
        resultDiv.innerHTML = html
    } catch(err){
        resultDiv.innerHTML = `<p class="error">‚ùå Error during processing!</p>`
    }
}
</script>
</body>
</html>
