<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Password</title>
    <link rel="stylesheet" href="../static/style.css">

    <style>
        .pw-hint { font-size: 14px; margin-top: 5px; }
    </style>
</head>
<body>

<nav class="navbar">
    <div class="nav-left">
        <a href="/" class="nav-logo">DeepfakeDetect</a>
    </div>
    <div class="nav-right">
        <a href="/dashboard">Dashboard</a>
        <a href="/account">Account</a>
        <a href="/logout" class="btn-logout">Logout</a>
    </div>
</nav>

<main class="container">
    <h2>Change Password</h2>

    <form method="POST">

        <label>Old Password</label>
        <input type="password" name="old_password" required>

        <label>New Password</label>
        <input type="password" name="new_password" id="new_password" required>
        <p id="pw_strength" class="pw-hint"></p>

        <label>Confirm New Password</label>
        <input type="password" name="confirm_password" required>

        <button class="btn-primary" type="submit">Update Password</button>

    </form>
</main>

<script>
    const pw = document.getElementById("new_password");
    const hint = document.getElementById("pw_strength");

    pw.addEventListener("input", () => {
        const p = pw.value;

        const lengthOK = p.length >= 7;
        const hasUpper = /[A-Z]/.test(p);
        const hasLower = /[a-z]/.test(p);
        const hasNum = /[0-9]/.test(p);
        const hasSpecial = /[!@#$%^&*(),.?":{}|<>]/.test(p);

        if (!p) {
            hint.innerHTML = "";
            return;
        }

        if (lengthOK && hasUpper && hasLower && hasNum && hasSpecial) {
            hint.style.color = "lightgreen";
            hint.innerHTML = "✔ Mật khẩu mạnh";
        } else {
            hint.style.color = "orange";
            hint.innerHTML = "⚠ Yếu — yêu cầu ≥7 ký tự, gồm HOA + thường + số + ký tự đặc biệt";
        }
    });
</script>

</body>
</html>
